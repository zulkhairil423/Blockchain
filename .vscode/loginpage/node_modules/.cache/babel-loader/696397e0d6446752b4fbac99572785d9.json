{"ast":null,"code":"var _ = require('lodash');\n\nvar Eventstore = require('./eventstore');\n/**\n * Emit events before and after execution of eventstore methods.\n * @param {Function} eventstore - eventstore store instance\n */\n\n\nfunction StoreEventEmitter(eventstore) {\n  if (!eventstore || !(eventstore instanceof Eventstore)) {\n    throw new Error('Provided eventstore must be instance of Eventstore');\n  }\n\n  var self = this;\n  self.eventstore = eventstore;\n  self.store = self.eventstore.store;\n  /**\n   * Get arguments which are emitted\n   * @param {Array} args - arguments from original implementation except callback\n   */\n\n  function getEmitArguments(args) {\n    return {\n      milliseconds: Date.now(),\n      arguments: args\n    };\n  }\n  /**\n   * Enhance original callback to emit an event\n   * @param {string} name - name which will be used to emit\n   * @param {Function} callback - callback function from original implementation\n   * @param {Array} args - arguments from original implementation except callback\n   */\n\n\n  function enhanceCallback(name, callback, args) {\n    var originalCallback = callback;\n\n    callback = function () {\n      self.eventstore.emit.call(self.eventstore, 'after-' + name, getEmitArguments(args));\n\n      if (originalCallback) {\n        return originalCallback.apply(this, arguments);\n      }\n\n      return;\n    };\n\n    return callback;\n  }\n  /**\n   * add event emitter advice to eventstore method\n   * @param {string} name - name which will be used to emit\n   * @param {Function} eventstore - eventstore store instance\n   * @param {Function} originalMethod  - original implementation which will be extended\n   * @param {Array} args - arguments from original implementation except callback\n   * @param {Function} callback - callback function from original implementation\n   */\n\n\n  function addEventEmitterToMethod(name, originalMethod, args, callback) {\n    args = _.without(args, undefined, null);\n    callback = enhanceCallback(name, callback, args);\n    self.eventstore.emit.call(self.eventstore, 'before-' + name, getEmitArguments(args));\n    return originalMethod.apply(this, _.concat(args, callback || []));\n  }\n\n  ;\n  /**\n   * Add event emitter to eventstore methods\n   */\n\n  StoreEventEmitter.prototype.addEventEmitter = function () {\n    /**\n     * add event emitter as an around advice to database methods\n     */\n    if (this.store.clear) {\n      var originalClear = this.store.clear;\n\n      this.store.clear = function (callback) {\n        return addEventEmitterToMethod.call(this, 'clear', originalClear, [], callback);\n      };\n    }\n\n    if (this.store.getNextPositions) {\n      var originalGetNextPositions = this.store.getNextPositions;\n\n      this.store.getNextPositions = function (positions, callback) {\n        return addEventEmitterToMethod.call(this, 'get-next-positions', originalGetNextPositions, [positions], callback);\n      };\n    }\n\n    if (this.store.addEvents) {\n      var originalAddEvents = this.store.addEvents;\n\n      this.store.addEvents = function (events, callback) {\n        return addEventEmitterToMethod.call(this, 'add-events', originalAddEvents, [events], callback);\n      };\n    }\n\n    if (this.eventstore.getEvents) {\n      var originalGetEvents = this.eventstore.getEvents;\n\n      this.eventstore.getEvents = function (query, skip, limit, callback) {\n        if (typeof query === 'function') {\n          callback = query;\n          query = undefined;\n        } else if (typeof skip === 'function') {\n          callback = skip;\n          skip = undefined;\n        } else if (typeof limit === 'function') {\n          callback = limit;\n          limit = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events', originalGetEvents, [query, skip, limit], callback);\n      };\n    }\n\n    if (this.eventstore.getEventsSince) {\n      var originalGetEventsSince = this.eventstore.getEventsSince;\n\n      this.eventstore.getEventsSince = function (date, skip, limit, callback) {\n        if (typeof skip === 'function') {\n          callback = skip;\n          skip = undefined;\n        } else if (typeof limit === 'function') {\n          callback = limit;\n          limit = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events-since', originalGetEventsSince, [date, skip, limit], callback);\n      };\n    }\n\n    if (this.eventstore.getEventsByRevision) {\n      var originalGetEventsByRevision = this.eventstore.getEventsByRevision;\n\n      this.eventstore.getEventsByRevision = function (query, revMin, revMax, callback) {\n        if (typeof revMin === 'function') {\n          callback = revMin;\n          revMin = undefined;\n        } else if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events-by-revision', originalGetEventsByRevision, [query, revMin, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.getLastEvent) {\n      var originalGetLastEvent = this.eventstore.getLastEvent;\n\n      this.eventstore.getLastEvent = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'get-last-event', originalGetLastEvent, [query], callback);\n      };\n    }\n\n    if (this.eventstore.getUndispatchedEvents) {\n      var originalGetUndispatchedEvents = this.eventstore.getUndispatchedEvents;\n\n      this.eventstore.getUndispatchedEvents = function (query, callback) {\n        if (!callback) {\n          callback = query;\n          query = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-undispatched-events', originalGetUndispatchedEvents, [query], callback);\n      };\n    }\n\n    if (this.eventstore.setEventToDispatched) {\n      var originalSetEventToDispatched = this.eventstore.setEventToDispatched;\n\n      this.eventstore.setEventToDispatched = function (id, callback) {\n        return addEventEmitterToMethod.call(this, 'set-event-to-dispatched', originalSetEventToDispatched, [id], callback);\n      };\n    }\n\n    if (this.store.addSnapshot) {\n      var originalAddSnapshots = this.store.addSnapshot;\n\n      this.store.addSnapshot = function (snap, callback) {\n        return addEventEmitterToMethod.call(this, 'add-snapshot', originalAddSnapshots, [snap], callback);\n      };\n    }\n\n    if (this.store.cleanSnapshots) {\n      var originalCleanSnapshots = this.store.cleanSnapshots;\n\n      this.store.cleanSnapshots = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'clean-snapshots', originalCleanSnapshots, [query], callback);\n      };\n    }\n\n    if (this.store.getSnapshot) {\n      var originalGetSnapshot = this.store.getSnapshot;\n\n      this.store.getSnapshot = function (query, revMax, callback) {\n        return addEventEmitterToMethod.call(this, 'get-snapshot', originalGetSnapshot, [query, revMax], callback);\n      };\n    }\n\n    if (this.store.removeTransactions) {\n      var originalRemoveTransactions = this.store.removeTransactions;\n\n      this.store.removeTransactions = function (evt, callback) {\n        return addEventEmitterToMethod.call(this, 'remove-transactions', originalRemoveTransactions, [evt], callback);\n      };\n    }\n\n    if (this.store.getPendingTransactions) {\n      var originalGetPendingTransactions = this.store.getPendingTransactions;\n\n      this.store.getPendingTransactions = function (callback) {\n        return addEventEmitterToMethod.call(this, 'get-pending-transactions', originalGetPendingTransactions, [], callback);\n      };\n    }\n\n    if (this.store.repairFailedTransaction) {\n      var originalRepairFailedTransaction = this.store.repairFailedTransaction;\n\n      this.store.repairFailedTransaction = function (lastEvt, callback) {\n        return addEventEmitterToMethod.call(this, 'repair-failed-transactions', originalRepairFailedTransaction, [lastEvt], callback);\n      };\n    }\n\n    if (this.store.removeTables) {\n      var originalRemoveTables = this.store.removeTables;\n\n      this.store.removeTables = function (callback) {\n        return addEventEmitterToMethod.call(this, 'remove-tables', originalRemoveTables, [], callback);\n      };\n    }\n\n    if (this.eventstore.streamEvents) {\n      var originalStreamEvents = this.eventstore.streamEvents;\n\n      this.eventstore.streamEvents = function (query, skip, limit) {\n        return addEventEmitterToMethod.call(this, 'stream-events', originalStreamEvents, [query, skip, limit]);\n      };\n    }\n\n    if (this.eventstore.streamEventsSince) {\n      var originalStreamEventsSince = this.eventstore.streamEventsSince;\n\n      this.eventstore.streamEventsSince = function (date, skip, limit) {\n        return addEventEmitterToMethod.call(this, 'stream-events-since', originalStreamEventsSince, [date, skip, limit]);\n      };\n    }\n\n    if (this.eventstore.streamEventsByRevision) {\n      var originalStreamEventsByRevision = this.eventstore.streamEventsByRevision;\n\n      this.eventstore.streamEventsByRevision = function (query, revMin, revMax) {\n        return addEventEmitterToMethod.call(this, 'stream-events-by-revision', originalStreamEventsByRevision, [query, revMin, revMax]);\n      };\n    }\n\n    if (this.eventstore.getEventStream) {\n      var originalGetEventStream = this.eventstore.getEventStream;\n\n      this.eventstore.getEventStream = function (query, revMin, revMax, callback) {\n        if (typeof revMin === 'function') {\n          callback = revMin;\n          revMin = undefined;\n        } else if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-event-stream', originalGetEventStream, [query, revMin, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.getFromSnapshot) {\n      var originalGetFromSnapshot = this.eventstore.getFromSnapshot;\n\n      this.eventstore.getFromSnapshot = function (query, revMax, callback) {\n        if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-from-snapshot', originalGetFromSnapshot, [query, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.createSnapshot) {\n      var originalCreateSnapshot = this.eventstore.createSnapshot;\n\n      this.eventstore.createSnapshot = function (obj, callback) {\n        return addEventEmitterToMethod.call(this, 'create-snapshot', originalCreateSnapshot, [obj], callback);\n      };\n    }\n\n    if (this.eventstore.commit) {\n      var originalCommit = this.eventstore.commit;\n\n      this.eventstore.commit = function (eventstream, callback) {\n        return addEventEmitterToMethod.call(this, 'commit', originalCommit, [eventstream], callback);\n      };\n    }\n\n    if (this.eventstore.getLastEventAsStream) {\n      var originalGetLastEventAsStream = this.eventstore.getLastEventAsStream;\n\n      this.eventstore.getLastEventAsStream = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'get-last-event-as-stream', originalGetLastEventAsStream, [query], callback);\n      };\n    }\n  };\n}\n\nmodule.exports = StoreEventEmitter;","map":{"version":3,"names":["_","require","Eventstore","StoreEventEmitter","eventstore","Error","self","store","getEmitArguments","args","milliseconds","Date","now","arguments","enhanceCallback","name","callback","originalCallback","emit","call","apply","addEventEmitterToMethod","originalMethod","without","undefined","concat","prototype","addEventEmitter","clear","originalClear","getNextPositions","originalGetNextPositions","positions","addEvents","originalAddEvents","events","getEvents","originalGetEvents","query","skip","limit","getEventsSince","originalGetEventsSince","date","getEventsByRevision","originalGetEventsByRevision","revMin","revMax","getLastEvent","originalGetLastEvent","getUndispatchedEvents","originalGetUndispatchedEvents","setEventToDispatched","originalSetEventToDispatched","id","addSnapshot","originalAddSnapshots","snap","cleanSnapshots","originalCleanSnapshots","getSnapshot","originalGetSnapshot","removeTransactions","originalRemoveTransactions","evt","getPendingTransactions","originalGetPendingTransactions","repairFailedTransaction","originalRepairFailedTransaction","lastEvt","removeTables","originalRemoveTables","streamEvents","originalStreamEvents","streamEventsSince","originalStreamEventsSince","streamEventsByRevision","originalStreamEventsByRevision","getEventStream","originalGetEventStream","getFromSnapshot","originalGetFromSnapshot","createSnapshot","originalCreateSnapshot","obj","commit","originalCommit","eventstream","getLastEventAsStream","originalGetLastEventAsStream","module","exports"],"sources":["C:/Users/LeonyX/Documents/Blockchain/.vscode/loginpage/node_modules/eventstore/lib/storeEventEmitter.js"],"sourcesContent":["var _ = require('lodash');\nvar Eventstore = require('./eventstore');\n\n/**\n * Emit events before and after execution of eventstore methods.\n * @param {Function} eventstore - eventstore store instance\n */\nfunction StoreEventEmitter(eventstore) {\n  if (!eventstore || !(eventstore instanceof Eventstore)) {\n    throw new Error('Provided eventstore must be instance of Eventstore');\n  }\n\n  var self = this;\n  self.eventstore = eventstore;\n  self.store = self.eventstore.store;\n\n  /**\n   * Get arguments which are emitted\n   * @param {Array} args - arguments from original implementation except callback\n   */\n  function getEmitArguments(args) {\n    return {\n      milliseconds: Date.now(),\n      arguments: args\n    };\n  }\n\n  /**\n   * Enhance original callback to emit an event\n   * @param {string} name - name which will be used to emit\n   * @param {Function} callback - callback function from original implementation\n   * @param {Array} args - arguments from original implementation except callback\n   */\n  function enhanceCallback(name, callback, args) {\n    var originalCallback = callback;\n\n    callback = function () {\n      self.eventstore.emit.call(self.eventstore, 'after-' + name, getEmitArguments(args));\n\n      if (originalCallback) {\n        return originalCallback.apply(this, arguments);\n      }\n\n      return;\n    };\n\n    return callback;\n  }\n\n  /**\n   * add event emitter advice to eventstore method\n   * @param {string} name - name which will be used to emit\n   * @param {Function} eventstore - eventstore store instance\n   * @param {Function} originalMethod  - original implementation which will be extended\n   * @param {Array} args - arguments from original implementation except callback\n   * @param {Function} callback - callback function from original implementation\n   */\n  function addEventEmitterToMethod(name, originalMethod, args, callback) {\n    args = _.without(args, undefined, null);\n\n    callback = enhanceCallback(name, callback, args);\n\n    self.eventstore.emit.call(self.eventstore, 'before-' + name, getEmitArguments(args));\n    return originalMethod.apply(this, _.concat(args, callback || []));\n  };\n\n  /**\n   * Add event emitter to eventstore methods\n   */\n  StoreEventEmitter.prototype.addEventEmitter = function () {\n    /**\n     * add event emitter as an around advice to database methods\n     */\n    if (this.store.clear) {\n      var originalClear = this.store.clear;\n      this.store.clear = function (callback) {\n        return addEventEmitterToMethod.call(this, 'clear', originalClear, [], callback);\n      };\n    }\n\n    if (this.store.getNextPositions) {\n      var originalGetNextPositions = this.store.getNextPositions;\n      this.store.getNextPositions = function (positions, callback) {\n        return addEventEmitterToMethod.call(this, 'get-next-positions', originalGetNextPositions, [positions], callback);\n      };\n    }\n\n    if (this.store.addEvents) {\n      var originalAddEvents = this.store.addEvents;\n      this.store.addEvents = function (events, callback) {\n        return addEventEmitterToMethod.call(this, 'add-events', originalAddEvents, [events], callback);\n      };\n    }\n\n    if (this.eventstore.getEvents) {\n      var originalGetEvents = this.eventstore.getEvents;\n\n      this.eventstore.getEvents = function (query, skip, limit, callback) {\n        if (typeof query === 'function') {\n          callback = query;\n          query = undefined;\n        } else if (typeof skip === 'function') {\n          callback = skip;\n          skip = undefined;\n        } else if (typeof limit === 'function') {\n          callback = limit;\n          limit = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events', originalGetEvents, [query, skip, limit], callback);\n      };\n    }\n\n    if (this.eventstore.getEventsSince) {\n      var originalGetEventsSince = this.eventstore.getEventsSince;\n      this.eventstore.getEventsSince = function (date, skip, limit, callback) {\n        if (typeof skip === 'function') {\n          callback = skip;\n          skip = undefined;\n        } else if (typeof limit === 'function') {\n          callback = limit;\n          limit = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events-since', originalGetEventsSince, [date, skip, limit], callback);\n      };\n    }\n\n    if (this.eventstore.getEventsByRevision) {\n      var originalGetEventsByRevision = this.eventstore.getEventsByRevision;\n      this.eventstore.getEventsByRevision = function (query, revMin, revMax, callback) {\n        if (typeof revMin === 'function') {\n          callback = revMin;\n          revMin = undefined;\n        } else if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-events-by-revision', originalGetEventsByRevision, [query, revMin, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.getLastEvent) {\n      var originalGetLastEvent = this.eventstore.getLastEvent;\n      this.eventstore.getLastEvent = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'get-last-event', originalGetLastEvent, [query], callback);\n      };\n    }\n\n    if (this.eventstore.getUndispatchedEvents) {\n      var originalGetUndispatchedEvents = this.eventstore.getUndispatchedEvents;\n      this.eventstore.getUndispatchedEvents = function (query, callback) {\n        if (!callback) {\n          callback = query;\n          query = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-undispatched-events', originalGetUndispatchedEvents, [query], callback);\n      };\n    }\n\n    if (this.eventstore.setEventToDispatched) {\n      var originalSetEventToDispatched = this.eventstore.setEventToDispatched;\n      this.eventstore.setEventToDispatched = function (id, callback) {\n        return addEventEmitterToMethod.call(this, 'set-event-to-dispatched', originalSetEventToDispatched, [id], callback);\n      };\n    }\n\n    if (this.store.addSnapshot) {\n      var originalAddSnapshots = this.store.addSnapshot;\n      this.store.addSnapshot = function (snap, callback) {\n        return addEventEmitterToMethod.call(this, 'add-snapshot', originalAddSnapshots, [snap], callback);\n      };\n    }\n\n    if (this.store.cleanSnapshots) {\n      var originalCleanSnapshots = this.store.cleanSnapshots;\n      this.store.cleanSnapshots = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'clean-snapshots', originalCleanSnapshots, [query], callback);\n      };\n    }\n\n    if (this.store.getSnapshot) {\n      var originalGetSnapshot = this.store.getSnapshot;\n      this.store.getSnapshot = function (query, revMax, callback) {\n        return addEventEmitterToMethod.call(this, 'get-snapshot', originalGetSnapshot, [query, revMax], callback);\n      };\n    }\n\n    if (this.store.removeTransactions) {\n      var originalRemoveTransactions = this.store.removeTransactions;\n      this.store.removeTransactions = function (evt, callback) {\n        return addEventEmitterToMethod.call(this, 'remove-transactions', originalRemoveTransactions, [evt], callback);\n      };\n    }\n\n    if (this.store.getPendingTransactions) {\n      var originalGetPendingTransactions = this.store.getPendingTransactions;\n      this.store.getPendingTransactions = function (callback) {\n        return addEventEmitterToMethod.call(this, 'get-pending-transactions', originalGetPendingTransactions, [], callback);\n      };\n    }\n\n    if (this.store.repairFailedTransaction) {\n      var originalRepairFailedTransaction = this.store.repairFailedTransaction;\n      this.store.repairFailedTransaction = function (lastEvt, callback) {\n        return addEventEmitterToMethod.call(this, 'repair-failed-transactions', originalRepairFailedTransaction, [lastEvt], callback);\n      };\n    }\n\n    if (this.store.removeTables) {\n      var originalRemoveTables = this.store.removeTables;\n      this.store.removeTables = function (callback) {\n        return addEventEmitterToMethod.call(this, 'remove-tables', originalRemoveTables, [], callback);\n      };\n    }\n\n    if (this.eventstore.streamEvents) {\n      var originalStreamEvents = this.eventstore.streamEvents;\n      this.eventstore.streamEvents = function (query, skip, limit) {\n        return addEventEmitterToMethod.call(this, 'stream-events', originalStreamEvents, [query, skip, limit]);\n      };\n    }\n\n    if (this.eventstore.streamEventsSince) {\n      var originalStreamEventsSince = this.eventstore.streamEventsSince;\n      this.eventstore.streamEventsSince = function (date, skip, limit) {\n        return addEventEmitterToMethod.call(this, 'stream-events-since', originalStreamEventsSince, [date, skip, limit]);\n      };\n    }\n\n    if (this.eventstore.streamEventsByRevision) {\n      var originalStreamEventsByRevision = this.eventstore.streamEventsByRevision;\n      this.eventstore.streamEventsByRevision = function (query, revMin, revMax) {\n        return addEventEmitterToMethod.call(this, 'stream-events-by-revision', originalStreamEventsByRevision, [query, revMin, revMax]);\n      };\n    }\n\n    if (this.eventstore.getEventStream) {\n      var originalGetEventStream = this.eventstore.getEventStream;\n      this.eventstore.getEventStream = function (query, revMin, revMax, callback) {\n        if (typeof revMin === 'function') {\n          callback = revMin;\n          revMin = undefined;\n        } else if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-event-stream', originalGetEventStream, [query, revMin, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.getFromSnapshot) {\n      var originalGetFromSnapshot = this.eventstore.getFromSnapshot;\n      this.eventstore.getFromSnapshot = function (query, revMax, callback) {\n        if (typeof revMax === 'function') {\n          callback = revMax;\n          revMax = undefined;\n        }\n\n        return addEventEmitterToMethod.call(this, 'get-from-snapshot', originalGetFromSnapshot, [query, revMax], callback);\n      };\n    }\n\n    if (this.eventstore.createSnapshot) {\n      var originalCreateSnapshot = this.eventstore.createSnapshot;\n      this.eventstore.createSnapshot = function (obj, callback) {\n        return addEventEmitterToMethod.call(this, 'create-snapshot', originalCreateSnapshot, [obj], callback);\n      };\n    }\n\n    if (this.eventstore.commit) {\n      var originalCommit = this.eventstore.commit;\n      this.eventstore.commit = function (eventstream, callback) {\n        return addEventEmitterToMethod.call(this, 'commit', originalCommit, [eventstream], callback);\n      };\n    }\n\n    if (this.eventstore.getLastEventAsStream) {\n      var originalGetLastEventAsStream = this.eventstore.getLastEventAsStream;\n      this.eventstore.getLastEventAsStream = function (query, callback) {\n        return addEventEmitterToMethod.call(this, 'get-last-event-as-stream', originalGetLastEventAsStream, [query], callback);\n      };\n    }\n  };\n}\n\nmodule.exports = StoreEventEmitter;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}