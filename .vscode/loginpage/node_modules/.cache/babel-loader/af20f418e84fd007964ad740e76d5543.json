{"ast":null,"code":"'use strict';\n\nconst Dispatcher = require('./dispatcher');\n\nconst {\n  ClientDestroyedError,\n  ClientClosedError,\n  InvalidArgumentError\n} = require('./core/errors');\n\nconst {\n  kDestroy,\n  kClose,\n  kDispatch,\n  kInterceptors\n} = require('./core/symbols');\n\nconst kDestroyed = Symbol('destroyed');\nconst kClosed = Symbol('closed');\nconst kOnDestroyed = Symbol('onDestroyed');\nconst kOnClosed = Symbol('onClosed');\nconst kInterceptedDispatch = Symbol('Intercepted Dispatch');\n\nclass DispatcherBase extends Dispatcher {\n  constructor() {\n    super();\n    this[kDestroyed] = false;\n    this[kOnDestroyed] = [];\n    this[kClosed] = false;\n    this[kOnClosed] = [];\n  }\n\n  get destroyed() {\n    return this[kDestroyed];\n  }\n\n  get closed() {\n    return this[kClosed];\n  }\n\n  get interceptors() {\n    return this[kInterceptors];\n  }\n\n  set interceptors(newInterceptors) {\n    if (newInterceptors) {\n      for (let i = newInterceptors.length - 1; i >= 0; i--) {\n        const interceptor = this[kInterceptors][i];\n\n        if (typeof interceptor !== 'function') {\n          throw new InvalidArgumentError('interceptor must be an function');\n        }\n      }\n    }\n\n    this[kInterceptors] = newInterceptors;\n  }\n\n  close(callback) {\n    if (callback === undefined) {\n      return new Promise((resolve, reject) => {\n        this.close((err, data) => {\n          return err ? reject(err) : resolve(data);\n        });\n      });\n    }\n\n    if (typeof callback !== 'function') {\n      throw new InvalidArgumentError('invalid callback');\n    }\n\n    if (this[kDestroyed]) {\n      queueMicrotask(() => callback(new ClientDestroyedError(), null));\n      return;\n    }\n\n    if (this[kClosed]) {\n      if (this[kOnClosed]) {\n        this[kOnClosed].push(callback);\n      } else {\n        queueMicrotask(() => callback(null, null));\n      }\n\n      return;\n    }\n\n    this[kClosed] = true;\n    this[kOnClosed].push(callback);\n\n    const onClosed = () => {\n      const callbacks = this[kOnClosed];\n      this[kOnClosed] = null;\n\n      for (let i = 0; i < callbacks.length; i++) {\n        callbacks[i](null, null);\n      }\n    }; // Should not error.\n\n\n    this[kClose]().then(() => this.destroy()).then(() => {\n      queueMicrotask(onClosed);\n    });\n  }\n\n  destroy(err, callback) {\n    if (typeof err === 'function') {\n      callback = err;\n      err = null;\n    }\n\n    if (callback === undefined) {\n      return new Promise((resolve, reject) => {\n        this.destroy(err, (err, data) => {\n          return err ?\n          /* istanbul ignore next: should never error */\n          reject(err) : resolve(data);\n        });\n      });\n    }\n\n    if (typeof callback !== 'function') {\n      throw new InvalidArgumentError('invalid callback');\n    }\n\n    if (this[kDestroyed]) {\n      if (this[kOnDestroyed]) {\n        this[kOnDestroyed].push(callback);\n      } else {\n        queueMicrotask(() => callback(null, null));\n      }\n\n      return;\n    }\n\n    if (!err) {\n      err = new ClientDestroyedError();\n    }\n\n    this[kDestroyed] = true;\n    this[kOnDestroyed].push(callback);\n\n    const onDestroyed = () => {\n      const callbacks = this[kOnDestroyed];\n      this[kOnDestroyed] = null;\n\n      for (let i = 0; i < callbacks.length; i++) {\n        callbacks[i](null, null);\n      }\n    }; // Should not error.\n\n\n    this[kDestroy](err).then(() => {\n      queueMicrotask(onDestroyed);\n    });\n  }\n\n  [kInterceptedDispatch](opts, handler) {\n    if (!this[kInterceptors] || this[kInterceptors].length === 0) {\n      this[kInterceptedDispatch] = this[kDispatch];\n      return this[kDispatch](opts, handler);\n    }\n\n    let dispatch = this[kDispatch].bind(this);\n\n    for (let i = this[kInterceptors].length - 1; i >= 0; i--) {\n      dispatch = this[kInterceptors][i](dispatch);\n    }\n\n    this[kInterceptedDispatch] = dispatch;\n    return dispatch(opts, handler);\n  }\n\n  dispatch(opts, handler) {\n    if (!handler || typeof handler !== 'object') {\n      throw new InvalidArgumentError('handler must be an object');\n    }\n\n    try {\n      if (!opts || typeof opts !== 'object') {\n        throw new InvalidArgumentError('opts must be an object.');\n      }\n\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError();\n      }\n\n      if (this[kClosed]) {\n        throw new ClientClosedError();\n      }\n\n      return this[kInterceptedDispatch](opts, handler);\n    } catch (err) {\n      if (typeof handler.onError !== 'function') {\n        throw new InvalidArgumentError('invalid onError method');\n      }\n\n      handler.onError(err);\n      return false;\n    }\n  }\n\n}\n\nmodule.exports = DispatcherBase;","map":{"version":3,"names":["Dispatcher","require","ClientDestroyedError","ClientClosedError","InvalidArgumentError","kDestroy","kClose","kDispatch","kInterceptors","kDestroyed","Symbol","kClosed","kOnDestroyed","kOnClosed","kInterceptedDispatch","DispatcherBase","constructor","destroyed","closed","interceptors","newInterceptors","i","length","interceptor","close","callback","undefined","Promise","resolve","reject","err","data","queueMicrotask","push","onClosed","callbacks","then","destroy","onDestroyed","opts","handler","dispatch","bind","onError","module","exports"],"sources":["C:/Users/LeonyX/Documents/Blockchain/.vscode/loginpage/node_modules/undici/lib/dispatcher-base.js"],"sourcesContent":["'use strict'\n\nconst Dispatcher = require('./dispatcher')\nconst {\n  ClientDestroyedError,\n  ClientClosedError,\n  InvalidArgumentError\n} = require('./core/errors')\nconst { kDestroy, kClose, kDispatch, kInterceptors } = require('./core/symbols')\n\nconst kDestroyed = Symbol('destroyed')\nconst kClosed = Symbol('closed')\nconst kOnDestroyed = Symbol('onDestroyed')\nconst kOnClosed = Symbol('onClosed')\nconst kInterceptedDispatch = Symbol('Intercepted Dispatch')\n\nclass DispatcherBase extends Dispatcher {\n  constructor () {\n    super()\n\n    this[kDestroyed] = false\n    this[kOnDestroyed] = []\n    this[kClosed] = false\n    this[kOnClosed] = []\n  }\n\n  get destroyed () {\n    return this[kDestroyed]\n  }\n\n  get closed () {\n    return this[kClosed]\n  }\n\n  get interceptors () {\n    return this[kInterceptors]\n  }\n\n  set interceptors (newInterceptors) {\n    if (newInterceptors) {\n      for (let i = newInterceptors.length - 1; i >= 0; i--) {\n        const interceptor = this[kInterceptors][i]\n        if (typeof interceptor !== 'function') {\n          throw new InvalidArgumentError('interceptor must be an function')\n        }\n      }\n    }\n\n    this[kInterceptors] = newInterceptors\n  }\n\n  close (callback) {\n    if (callback === undefined) {\n      return new Promise((resolve, reject) => {\n        this.close((err, data) => {\n          return err ? reject(err) : resolve(data)\n        })\n      })\n    }\n\n    if (typeof callback !== 'function') {\n      throw new InvalidArgumentError('invalid callback')\n    }\n\n    if (this[kDestroyed]) {\n      queueMicrotask(() => callback(new ClientDestroyedError(), null))\n      return\n    }\n\n    if (this[kClosed]) {\n      if (this[kOnClosed]) {\n        this[kOnClosed].push(callback)\n      } else {\n        queueMicrotask(() => callback(null, null))\n      }\n      return\n    }\n\n    this[kClosed] = true\n    this[kOnClosed].push(callback)\n\n    const onClosed = () => {\n      const callbacks = this[kOnClosed]\n      this[kOnClosed] = null\n      for (let i = 0; i < callbacks.length; i++) {\n        callbacks[i](null, null)\n      }\n    }\n\n    // Should not error.\n    this[kClose]()\n      .then(() => this.destroy())\n      .then(() => {\n        queueMicrotask(onClosed)\n      })\n  }\n\n  destroy (err, callback) {\n    if (typeof err === 'function') {\n      callback = err\n      err = null\n    }\n\n    if (callback === undefined) {\n      return new Promise((resolve, reject) => {\n        this.destroy(err, (err, data) => {\n          return err ? /* istanbul ignore next: should never error */ reject(err) : resolve(data)\n        })\n      })\n    }\n\n    if (typeof callback !== 'function') {\n      throw new InvalidArgumentError('invalid callback')\n    }\n\n    if (this[kDestroyed]) {\n      if (this[kOnDestroyed]) {\n        this[kOnDestroyed].push(callback)\n      } else {\n        queueMicrotask(() => callback(null, null))\n      }\n      return\n    }\n\n    if (!err) {\n      err = new ClientDestroyedError()\n    }\n\n    this[kDestroyed] = true\n    this[kOnDestroyed].push(callback)\n\n    const onDestroyed = () => {\n      const callbacks = this[kOnDestroyed]\n      this[kOnDestroyed] = null\n      for (let i = 0; i < callbacks.length; i++) {\n        callbacks[i](null, null)\n      }\n    }\n\n    // Should not error.\n    this[kDestroy](err).then(() => {\n      queueMicrotask(onDestroyed)\n    })\n  }\n\n  [kInterceptedDispatch] (opts, handler) {\n    if (!this[kInterceptors] || this[kInterceptors].length === 0) {\n      this[kInterceptedDispatch] = this[kDispatch]\n      return this[kDispatch](opts, handler)\n    }\n\n    let dispatch = this[kDispatch].bind(this)\n    for (let i = this[kInterceptors].length - 1; i >= 0; i--) {\n      dispatch = this[kInterceptors][i](dispatch)\n    }\n    this[kInterceptedDispatch] = dispatch\n    return dispatch(opts, handler)\n  }\n\n  dispatch (opts, handler) {\n    if (!handler || typeof handler !== 'object') {\n      throw new InvalidArgumentError('handler must be an object')\n    }\n\n    try {\n      if (!opts || typeof opts !== 'object') {\n        throw new InvalidArgumentError('opts must be an object.')\n      }\n\n      if (this[kDestroyed]) {\n        throw new ClientDestroyedError()\n      }\n\n      if (this[kClosed]) {\n        throw new ClientClosedError()\n      }\n\n      return this[kInterceptedDispatch](opts, handler)\n    } catch (err) {\n      if (typeof handler.onError !== 'function') {\n        throw new InvalidArgumentError('invalid onError method')\n      }\n\n      handler.onError(err)\n\n      return false\n    }\n  }\n}\n\nmodule.exports = DispatcherBase\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}