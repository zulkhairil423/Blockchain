{"ast":null,"code":"'use strict';\n\nconst {\n  PoolBase,\n  kClients,\n  kNeedDrain,\n  kAddClient,\n  kGetDispatcher\n} = require('./pool-base');\n\nconst Client = require('./client');\n\nconst {\n  InvalidArgumentError\n} = require('./core/errors');\n\nconst util = require('./core/util');\n\nconst {\n  kUrl,\n  kInterceptors\n} = require('./core/symbols');\n\nconst buildConnector = require('./core/connect');\n\nconst kOptions = Symbol('options');\nconst kConnections = Symbol('connections');\nconst kFactory = Symbol('factory');\n\nfunction defaultFactory(origin, opts) {\n  return new Client(origin, opts);\n}\n\nclass Pool extends PoolBase {\n  constructor(origin) {\n    let {\n      connections,\n      factory = defaultFactory,\n      connect,\n      connectTimeout,\n      tls,\n      maxCachedSessions,\n      socketPath,\n      ...options\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n\n    if (connections != null && (!Number.isFinite(connections) || connections < 0)) {\n      throw new InvalidArgumentError('invalid connections');\n    }\n\n    if (typeof factory !== 'function') {\n      throw new InvalidArgumentError('factory must be a function.');\n    }\n\n    if (connect != null && typeof connect !== 'function' && typeof connect !== 'object') {\n      throw new InvalidArgumentError('connect must be a function or an object');\n    }\n\n    if (typeof connect !== 'function') {\n      connect = buildConnector({ ...tls,\n        maxCachedSessions,\n        socketPath,\n        timeout: connectTimeout == null ? 10e3 : connectTimeout,\n        ...connect\n      });\n    }\n\n    this[kInterceptors] = options.interceptors && options.interceptors.Pool && Array.isArray(options.interceptors.Pool) ? options.interceptors.Pool : [];\n    this[kConnections] = connections || null;\n    this[kUrl] = util.parseOrigin(origin);\n    this[kOptions] = { ...util.deepClone(options),\n      connect\n    };\n    this[kOptions].interceptors = options.interceptors ? { ...options.interceptors\n    } : undefined;\n    this[kFactory] = factory;\n  }\n\n  [kGetDispatcher]() {\n    let dispatcher = this[kClients].find(dispatcher => !dispatcher[kNeedDrain]);\n\n    if (dispatcher) {\n      return dispatcher;\n    }\n\n    if (!this[kConnections] || this[kClients].length < this[kConnections]) {\n      dispatcher = this[kFactory](this[kUrl], this[kOptions]);\n      this[kAddClient](dispatcher);\n    }\n\n    return dispatcher;\n  }\n\n}\n\nmodule.exports = Pool;","map":{"version":3,"names":["PoolBase","kClients","kNeedDrain","kAddClient","kGetDispatcher","require","Client","InvalidArgumentError","util","kUrl","kInterceptors","buildConnector","kOptions","Symbol","kConnections","kFactory","defaultFactory","origin","opts","Pool","constructor","connections","factory","connect","connectTimeout","tls","maxCachedSessions","socketPath","options","Number","isFinite","timeout","interceptors","Array","isArray","parseOrigin","deepClone","undefined","dispatcher","find","length","module","exports"],"sources":["C:/Users/LeonyX/Documents/Blockchain/.vscode/loginpage/node_modules/undici/lib/pool.js"],"sourcesContent":["'use strict'\n\nconst {\n  PoolBase,\n  kClients,\n  kNeedDrain,\n  kAddClient,\n  kGetDispatcher\n} = require('./pool-base')\nconst Client = require('./client')\nconst {\n  InvalidArgumentError\n} = require('./core/errors')\nconst util = require('./core/util')\nconst { kUrl, kInterceptors } = require('./core/symbols')\nconst buildConnector = require('./core/connect')\n\nconst kOptions = Symbol('options')\nconst kConnections = Symbol('connections')\nconst kFactory = Symbol('factory')\n\nfunction defaultFactory (origin, opts) {\n  return new Client(origin, opts)\n}\n\nclass Pool extends PoolBase {\n  constructor (origin, {\n    connections,\n    factory = defaultFactory,\n    connect,\n    connectTimeout,\n    tls,\n    maxCachedSessions,\n    socketPath,\n    ...options\n  } = {}) {\n    super()\n\n    if (connections != null && (!Number.isFinite(connections) || connections < 0)) {\n      throw new InvalidArgumentError('invalid connections')\n    }\n\n    if (typeof factory !== 'function') {\n      throw new InvalidArgumentError('factory must be a function.')\n    }\n\n    if (connect != null && typeof connect !== 'function' && typeof connect !== 'object') {\n      throw new InvalidArgumentError('connect must be a function or an object')\n    }\n\n    if (typeof connect !== 'function') {\n      connect = buildConnector({\n        ...tls,\n        maxCachedSessions,\n        socketPath,\n        timeout: connectTimeout == null ? 10e3 : connectTimeout,\n        ...connect\n      })\n    }\n\n    this[kInterceptors] = options.interceptors && options.interceptors.Pool && Array.isArray(options.interceptors.Pool)\n      ? options.interceptors.Pool\n      : []\n    this[kConnections] = connections || null\n    this[kUrl] = util.parseOrigin(origin)\n    this[kOptions] = { ...util.deepClone(options), connect }\n    this[kOptions].interceptors = options.interceptors\n      ? { ...options.interceptors }\n      : undefined\n    this[kFactory] = factory\n  }\n\n  [kGetDispatcher] () {\n    let dispatcher = this[kClients].find(dispatcher => !dispatcher[kNeedDrain])\n\n    if (dispatcher) {\n      return dispatcher\n    }\n\n    if (!this[kConnections] || this[kClients].length < this[kConnections]) {\n      dispatcher = this[kFactory](this[kUrl], this[kOptions])\n      this[kAddClient](dispatcher)\n    }\n\n    return dispatcher\n  }\n}\n\nmodule.exports = Pool\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}