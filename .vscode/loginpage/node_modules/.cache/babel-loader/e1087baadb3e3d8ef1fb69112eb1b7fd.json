{"ast":null,"code":"function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = {\n      forever: options\n    };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n  this._timer = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\n\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function () {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts.slice(0);\n};\n\nRetryOperation.prototype.stop = function () {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (this._timer) {\n    clearTimeout(this._timer);\n  }\n\n  this._timeouts = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function (err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n\n  var currentTime = new Date().getTime();\n\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.push(err);\n\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(0, this._errors.length - 1);\n\n      timeout = this._cachedTimeouts.slice(-1);\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  this._timer = setTimeout(function () {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function () {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n        self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n    this._timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function (fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function () {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function (fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function (fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function () {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function () {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function () {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};","map":{"version":3,"names":["RetryOperation","timeouts","options","forever","_originalTimeouts","JSON","parse","stringify","_timeouts","_options","_maxRetryTime","maxRetryTime","Infinity","_fn","_errors","_attempts","_operationTimeout","_operationTimeoutCb","_timeout","_operationStart","_timer","_cachedTimeouts","slice","module","exports","prototype","reset","stop","clearTimeout","retry","err","currentTime","Date","getTime","push","unshift","Error","timeout","shift","undefined","splice","length","self","setTimeout","unref","attempt","fn","timeoutOps","cb","try","console","log","start","errors","attempts","mainError","counts","mainErrorCount","i","error","message","count"],"sources":["C:/Users/LeonyX/Documents/Blockchain/.vscode/loginpage/node_modules/retry/lib/retry_operation.js"],"sourcesContent":["function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = { forever: options };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n  this._timer = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function() {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts.slice(0);\n}\n\nRetryOperation.prototype.stop = function() {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n  if (this._timer) {\n    clearTimeout(this._timer);\n  }\n\n  this._timeouts       = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n  var currentTime = new Date().getTime();\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.push(err);\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(0, this._errors.length - 1);\n      timeout = this._cachedTimeouts.slice(-1);\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  this._timer = setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n          self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n      this._timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}