{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.watchCompilerOutput = void 0;\n\nconst chalk_1 = __importDefault(require(\"chalk\"));\n\nconst debug_1 = __importDefault(require(\"debug\"));\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst path = __importStar(require(\"path\"));\n\nconst constants_1 = require(\"../../internal/constants\");\n\nconst reporter_1 = require(\"../../internal/sentry/reporter\");\n\nconst log = (0, debug_1.default)(\"hardhat:core:compilation-watcher\");\n\nasync function watchCompilerOutput(provider, paths) {\n  const chokidar = await Promise.resolve().then(() => __importStar(require(\"chokidar\")));\n  const buildInfoDir = path.join(paths.artifacts, constants_1.BUILD_INFO_DIR_NAME);\n\n  const addCompilationResult = async buildInfo => {\n    try {\n      log(\"Adding new compilation result to the node\");\n      const {\n        input,\n        output,\n        solcVersion\n      } = await fs_extra_1.default.readJSON(buildInfo, {\n        encoding: \"utf8\"\n      });\n      await provider.request({\n        method: \"hardhat_addCompilationResult\",\n        params: [solcVersion, input, output]\n      });\n    } catch (error) {\n      console.warn(chalk_1.default.yellow(\"There was a problem adding the new compiler result. Run Hardhat with --verbose to learn more.\"));\n      log(\"Last compilation result couldn't be added. Please report this to help us improve Hardhat.\\n\", error);\n\n      if (error instanceof Error) {\n        reporter_1.Reporter.reportError(error);\n      }\n    }\n  };\n\n  log(`Watching changes on '${buildInfoDir}'`);\n  return chokidar.watch(buildInfoDir, {\n    ignoreInitial: true,\n    awaitWriteFinish: {\n      stabilityThreshold: 250,\n      pollInterval: 50\n    }\n  }).on(\"add\", addCompilationResult);\n}\n\nexports.watchCompilerOutput = watchCompilerOutput;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AAEA;;AACA;;AAGA,MAAMA,GAAG,GAAG,qBAAM,kCAAN,CAAZ;;AAIO,eAAeC,mBAAf,CACLC,QADK,EAELC,KAFK,EAEoB;EAEzB,MAAMC,QAAQ,GAAG,wDAAa,UAAb,GAAjB;EAEA,MAAMC,YAAY,GAAGC,IAAI,CAACC,IAAL,CAAUJ,KAAK,CAACK,SAAhB,EAA2BC,+BAA3B,CAArB;;EAEA,MAAMC,oBAAoB,GAAG,MAAOC,SAAP,IAA4B;IACvD,IAAI;MACFX,GAAG,CAAC,2CAAD,CAAH;MAEA,MAAM;QAAEY,KAAF;QAASC,MAAT;QAAiBC;MAAjB,IAAiC,MAAMC,mBAAQC,QAAR,CAAiBL,SAAjB,EAA4B;QACvEM,QAAQ,EAAE;MAD6D,CAA5B,CAA7C;MAIA,MAAMf,QAAQ,CAACgB,OAAT,CAAiB;QACrBC,MAAM,EAAE,8BADa;QAErBC,MAAM,EAAE,CAACN,WAAD,EAAcF,KAAd,EAAqBC,MAArB;MAFa,CAAjB,CAAN;IAID,CAXD,CAWE,OAAOQ,KAAP,EAAc;MACdC,OAAO,CAACC,IAAR,CACEC,gBAAMC,MAAN,CACE,+FADF,CADF;MAMAzB,GAAG,CACD,6FADC,EAEDqB,KAFC,CAAH;;MAKA,IAAIA,KAAK,YAAYK,KAArB,EAA4B;QAC1BC,oBAASC,WAAT,CAAqBP,KAArB;MACD;IACF;EACF,CA5BD;;EA8BArB,GAAG,CAAC,wBAAwBK,YAAY,GAArC,CAAH;EAEA,OAAOD,QAAQ,CACZyB,KADI,CACExB,YADF,EACgB;IACnByB,aAAa,EAAE,IADI;IAEnBC,gBAAgB,EAAE;MAChBC,kBAAkB,EAAE,GADJ;MAEhBC,YAAY,EAAE;IAFE;EAFC,CADhB,EAQJC,EARI,CAQD,KARC,EAQMxB,oBARN,CAAP;AASD;;AAjDDyB","names":["log","watchCompilerOutput","provider","paths","chokidar","buildInfoDir","path","join","artifacts","constants_1","addCompilationResult","buildInfo","input","output","solcVersion","fs_extra_1","readJSON","encoding","request","method","params","error","console","warn","chalk_1","yellow","Error","reporter_1","reportError","watch","ignoreInitial","awaitWriteFinish","stabilityThreshold","pollInterval","on","exports"],"sources":["C:\\Users\\LeonyX\\Documents\\Blockchain\\.vscode\\loginpage\\node_modules\\hardhat\\src\\builtin-tasks\\utils\\watch.ts"],"sourcesContent":["import chalk from \"chalk\";\nimport { FSWatcher } from \"chokidar\";\nimport debug from \"debug\";\nimport fsExtra from \"fs-extra\";\nimport * as path from \"path\";\n\nimport { BUILD_INFO_DIR_NAME } from \"../../internal/constants\";\nimport { Reporter } from \"../../internal/sentry/reporter\";\nimport { EIP1193Provider, ProjectPathsConfig } from \"../../types\";\n\nconst log = debug(\"hardhat:core:compilation-watcher\");\n\nexport type Watcher = FSWatcher;\n\nexport async function watchCompilerOutput(\n  provider: EIP1193Provider,\n  paths: ProjectPathsConfig\n): Promise<Watcher> {\n  const chokidar = await import(\"chokidar\");\n\n  const buildInfoDir = path.join(paths.artifacts, BUILD_INFO_DIR_NAME);\n\n  const addCompilationResult = async (buildInfo: string) => {\n    try {\n      log(\"Adding new compilation result to the node\");\n\n      const { input, output, solcVersion } = await fsExtra.readJSON(buildInfo, {\n        encoding: \"utf8\",\n      });\n\n      await provider.request({\n        method: \"hardhat_addCompilationResult\",\n        params: [solcVersion, input, output],\n      });\n    } catch (error) {\n      console.warn(\n        chalk.yellow(\n          \"There was a problem adding the new compiler result. Run Hardhat with --verbose to learn more.\"\n        )\n      );\n\n      log(\n        \"Last compilation result couldn't be added. Please report this to help us improve Hardhat.\\n\",\n        error\n      );\n\n      if (error instanceof Error) {\n        Reporter.reportError(error);\n      }\n    }\n  };\n\n  log(`Watching changes on '${buildInfoDir}'`);\n\n  return chokidar\n    .watch(buildInfoDir, {\n      ignoreInitial: true,\n      awaitWriteFinish: {\n        stabilityThreshold: 250,\n        pollInterval: 50,\n      },\n    })\n    .on(\"add\", addCompilationResult);\n}\n"]},"metadata":{},"sourceType":"script"}