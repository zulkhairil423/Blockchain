{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.analyzeModuleNotFoundError = exports.loadConfigAndTasks = exports.resolveConfigPath = void 0;\n\nconst chalk_1 = __importDefault(require(\"chalk\"));\n\nconst debug_1 = __importDefault(require(\"debug\"));\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst path_1 = __importDefault(require(\"path\"));\n\nconst semver_1 = __importDefault(require(\"semver\"));\n\nconst context_1 = require(\"../../context\");\n\nconst packageInfo_1 = require(\"../../util/packageInfo\");\n\nconst errors_1 = require(\"../errors\");\n\nconst errors_list_1 = require(\"../errors-list\");\n\nconst project_structure_1 = require(\"../project-structure\");\n\nconst constants_1 = require(\"../../hardhat-network/stack-traces/constants\");\n\nconst config_resolution_1 = require(\"./config-resolution\");\n\nconst config_validation_1 = require(\"./config-validation\");\n\nconst default_config_1 = require(\"./default-config\");\n\nconst log = (0, debug_1.default)(\"hardhat:core:config\");\n\nfunction importCsjOrEsModule(filePath) {\n  const imported = require(filePath);\n\n  return imported.default !== undefined ? imported.default : imported;\n}\n\nfunction resolveConfigPath(configPath) {\n  if (configPath === undefined) {\n    configPath = (0, project_structure_1.getUserConfigPath)();\n  } else {\n    if (!path_1.default.isAbsolute(configPath)) {\n      configPath = path_1.default.join(process.cwd(), configPath);\n      configPath = path_1.default.normalize(configPath);\n    }\n  }\n\n  return configPath;\n}\n\nexports.resolveConfigPath = resolveConfigPath;\n\nfunction loadConfigAndTasks(hardhatArguments) {\n  let {\n    showEmptyConfigWarning = false,\n    showSolidityConfigWarnings = false\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    showEmptyConfigWarning: false,\n    showSolidityConfigWarnings: false\n  };\n  let configPath = hardhatArguments !== undefined ? hardhatArguments.config : undefined;\n  configPath = resolveConfigPath(configPath);\n  log(`Loading Hardhat config from ${configPath}`); // Before loading the builtin tasks, the default and user's config we expose\n  // the config env in the global object.\n\n  const configEnv = require(\"./config-env\");\n\n  const globalAsAny = global;\n  Object.entries(configEnv).forEach(_ref => {\n    let [key, value] = _ref;\n    return globalAsAny[key] = value;\n  });\n  const ctx = context_1.HardhatContext.getHardhatContext();\n  ctx.setConfigLoadingAsStarted();\n  let userConfig;\n\n  try {\n    require(\"../tasks/builtin-tasks\");\n\n    userConfig = importCsjOrEsModule(configPath);\n  } catch (e) {\n    analyzeModuleNotFoundError(e, configPath); // eslint-disable-next-line @nomiclabs/hardhat-internal-rules/only-hardhat-error\n\n    throw e;\n  } finally {\n    ctx.setConfigLoadingAsFinished();\n  }\n\n  if (showEmptyConfigWarning) {\n    checkEmptyConfig(userConfig, {\n      showSolidityConfigWarnings\n    });\n  }\n\n  (0, config_validation_1.validateConfig)(userConfig);\n\n  if (showSolidityConfigWarnings) {\n    checkMissingSolidityConfig(userConfig);\n  } // To avoid bad practices we remove the previously exported stuff\n\n\n  Object.keys(configEnv).forEach(key => globalAsAny[key] = undefined);\n  const frozenUserConfig = deepFreezeUserConfig(userConfig);\n  const resolved = (0, config_resolution_1.resolveConfig)(configPath, userConfig);\n\n  for (const extender of context_1.HardhatContext.getHardhatContext().configExtenders) {\n    extender(resolved, frozenUserConfig);\n  }\n\n  if (showSolidityConfigWarnings) {\n    checkUnsupportedSolidityConfig(resolved);\n    checkUnsupportedRemappings(resolved);\n  }\n\n  return {\n    resolvedConfig: resolved,\n    userConfig: frozenUserConfig\n  };\n}\n\nexports.loadConfigAndTasks = loadConfigAndTasks;\n\nfunction deepFreezeUserConfig(config) {\n  let propertyPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof config !== \"object\" || config === null) {\n    return config;\n  }\n\n  return new Proxy(config, {\n    get(target, property, receiver) {\n      return deepFreezeUserConfig(Reflect.get(target, property, receiver), [...propertyPath, property]);\n    },\n\n    set(target, property, _value, _receiver) {\n      throw new errors_1.HardhatError(errors_list_1.ERRORS.GENERAL.USER_CONFIG_MODIFIED, {\n        path: [...propertyPath, property].map(pathPart => pathPart.toString()).join(\".\")\n      });\n    }\n\n  });\n}\n/**\n * Receives an Error and checks if it's a MODULE_NOT_FOUND and the reason that\n * caused it.\n *\n * If it can infer the reason, it throws an appropiate error. Otherwise it does\n * nothing.\n */\n\n\nfunction analyzeModuleNotFoundError(error, configPath) {\n  const stackTraceParser = require(\"stacktrace-parser\");\n\n  if (error.code !== \"MODULE_NOT_FOUND\") {\n    return;\n  }\n\n  const stackTrace = stackTraceParser.parse(error.stack);\n  const throwingFile = stackTrace.filter(x => x.file !== null).map(x => x.file).find(x => path_1.default.isAbsolute(x));\n\n  if (throwingFile === null || throwingFile === undefined) {\n    return;\n  } // if the error comes from the config file, we ignore it because we know it's\n  // a direct import that's missing\n\n\n  if (throwingFile === configPath) {\n    return;\n  }\n\n  const packageJsonPath = (0, packageInfo_1.findClosestPackageJson)(throwingFile);\n\n  if (packageJsonPath === null) {\n    return;\n  }\n\n  const packageJson = fs_extra_1.default.readJsonSync(packageJsonPath);\n  const peerDependencies = packageJson.peerDependencies ?? {};\n\n  if (peerDependencies[\"@nomiclabs/buidler\"] !== undefined) {\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.PLUGINS.BUIDLER_PLUGIN, {\n      plugin: packageJson.name\n    });\n  } // if the problem doesn't come from a hardhat plugin, we ignore it\n\n\n  if (peerDependencies.hardhat === undefined) {\n    return;\n  }\n\n  const missingPeerDependencies = {};\n\n  for (const [peerDependency, version] of Object.entries(peerDependencies)) {\n    const peerDependencyPackageJson = readPackageJson(peerDependency);\n\n    if (peerDependencyPackageJson === undefined) {\n      missingPeerDependencies[peerDependency] = version;\n    }\n  }\n\n  const missingPeerDependenciesNames = Object.keys(missingPeerDependencies);\n\n  if (missingPeerDependenciesNames.length > 0) {\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.PLUGINS.MISSING_DEPENDENCIES, {\n      plugin: packageJson.name,\n      missingDependencies: missingPeerDependenciesNames.join(\", \"),\n      missingDependenciesVersions: Object.entries(missingPeerDependencies).map(_ref2 => {\n        let [name, version] = _ref2;\n        return `\"${name}@${version}\"`;\n      }).join(\" \")\n    });\n  }\n}\n\nexports.analyzeModuleNotFoundError = analyzeModuleNotFoundError;\n\nfunction readPackageJson(packageName) {\n  try {\n    const packageJsonPath = require.resolve(path_1.default.join(packageName, \"package.json\"));\n\n    return require(packageJsonPath);\n  } catch {\n    return undefined;\n  }\n}\n\nfunction checkEmptyConfig(userConfig, _ref3) {\n  let {\n    showSolidityConfigWarnings\n  } = _ref3;\n\n  if (userConfig === undefined || Object.keys(userConfig).length === 0) {\n    let warning = `Hardhat config is returning an empty config object, check the export from the config file if this is unexpected.\\n`; // This 'learn more' section is also printed by the solidity config warning,\n    // so we need to check to avoid printing it twice\n\n    if (!showSolidityConfigWarnings) {\n      warning += `\\nLearn more about configuring Hardhat at https://hardhat.org/config\\n`;\n    }\n\n    console.warn(chalk_1.default.yellow(warning));\n  }\n}\n\nfunction checkMissingSolidityConfig(userConfig) {\n  if (userConfig.solidity === undefined) {\n    console.warn(chalk_1.default.yellow(`Solidity compiler is not configured. Version ${default_config_1.DEFAULT_SOLC_VERSION} will be used by default. Add a 'solidity' entry to your configuration to suppress this warning.\n\nLearn more about compiler configuration at https://hardhat.org/config\n`));\n  }\n}\n\nfunction checkUnsupportedSolidityConfig(resolvedConfig) {\n  const compilerVersions = resolvedConfig.solidity.compilers.map(x => x.version);\n  const overrideVersions = Object.values(resolvedConfig.solidity.overrides).map(x => x.version);\n  const solcVersions = [...compilerVersions, ...overrideVersions];\n  const unsupportedVersions = [];\n\n  for (const solcVersion of solcVersions) {\n    if (!semver_1.default.satisfies(solcVersion, constants_1.SUPPORTED_SOLIDITY_VERSION_RANGE)) {\n      unsupportedVersions.push(solcVersion);\n    }\n  }\n\n  if (unsupportedVersions.length > 0) {\n    console.warn(chalk_1.default.yellow(`Solidity ${unsupportedVersions.join(\", \")} ${unsupportedVersions.length === 1 ? \"is\" : \"are\"} not fully supported yet. You can still use Hardhat, but some features, like stack traces, might not work correctly.\n\nLearn more at https://hardhat.org/hardhat-runner/docs/reference/solidity-support\n`));\n  }\n}\n\nfunction checkUnsupportedRemappings(_ref4) {\n  let {\n    solidity\n  } = _ref4;\n  const solcConfigs = [...solidity.compilers, ...Object.values(solidity.overrides)];\n  const remappings = solcConfigs.filter(_ref5 => {\n    let {\n      settings\n    } = _ref5;\n    return settings.remappings !== undefined;\n  });\n\n  if (remappings.length > 0) {\n    console.warn(chalk_1.default.yellow(`Solidity remappings are not currently supported; you may experience unexpected compilation results. Remove any 'remappings' fields from your configuration to suppress this warning.\n\nLearn more about compiler configuration at https://hardhat.org/config\n`));\n  }\n}","map":{"version":3,"mappings":"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","names":["log","importCsjOrEsModule","filePath","imported","require","default","undefined","resolveConfigPath","configPath","path_1","isAbsolute","join","process","cwd","normalize","exports","loadConfigAndTasks","hardhatArguments","showEmptyConfigWarning","showSolidityConfigWarnings","config","configEnv","globalAsAny","global","Object","entries","forEach","key","value","ctx","context_1","getHardhatContext","setConfigLoadingAsStarted","userConfig","e","analyzeModuleNotFoundError","setConfigLoadingAsFinished","checkEmptyConfig","checkMissingSolidityConfig","keys","frozenUserConfig","deepFreezeUserConfig","resolved","extender","configExtenders","checkUnsupportedSolidityConfig","checkUnsupportedRemappings","resolvedConfig","propertyPath","Proxy","get","target","property","receiver","Reflect","set","_value","_receiver","errors_1","errors_list_1","GENERAL","USER_CONFIG_MODIFIED","path","map","pathPart","toString","error","stackTraceParser","code","stackTrace","parse","stack","throwingFile","filter","x","file","find","packageJsonPath","packageJson","fs_extra_1","readJsonSync","peerDependencies","PLUGINS","BUIDLER_PLUGIN","plugin","name","hardhat","missingPeerDependencies","peerDependency","version","peerDependencyPackageJson","readPackageJson","missingPeerDependenciesNames","length","MISSING_DEPENDENCIES","missingDependencies","missingDependenciesVersions","packageName","resolve","warning","console","warn","chalk_1","yellow","solidity","default_config_1","compilerVersions","compilers","overrideVersions","values","overrides","solcVersions","unsupportedVersions","solcVersion","semver_1","satisfies","constants_1","push","solcConfigs","remappings","settings"],"sources":["C:\\Users\\LeonyX\\Documents\\Blockchain\\.vscode\\loginpage\\node_modules\\hardhat\\src\\internal\\core\\config\\config-loading.ts"],"sourcesContent":["import type StackTraceParserT from \"stacktrace-parser\";\n\nimport chalk from \"chalk\";\nimport debug from \"debug\";\nimport fsExtra from \"fs-extra\";\nimport path from \"path\";\nimport semver from \"semver\";\n\nimport {\n  HardhatArguments,\n  HardhatConfig,\n  HardhatUserConfig,\n} from \"../../../types\";\nimport { HardhatContext } from \"../../context\";\nimport { findClosestPackageJson } from \"../../util/packageInfo\";\nimport { HardhatError } from \"../errors\";\nimport { ERRORS } from \"../errors-list\";\nimport { getUserConfigPath } from \"../project-structure\";\n\nimport { SUPPORTED_SOLIDITY_VERSION_RANGE } from \"../../hardhat-network/stack-traces/constants\";\nimport { resolveConfig } from \"./config-resolution\";\nimport { validateConfig } from \"./config-validation\";\nimport { DEFAULT_SOLC_VERSION } from \"./default-config\";\n\nconst log = debug(\"hardhat:core:config\");\n\nfunction importCsjOrEsModule(filePath: string): any {\n  const imported = require(filePath);\n  return imported.default !== undefined ? imported.default : imported;\n}\n\nexport function resolveConfigPath(configPath: string | undefined) {\n  if (configPath === undefined) {\n    configPath = getUserConfigPath();\n  } else {\n    if (!path.isAbsolute(configPath)) {\n      configPath = path.join(process.cwd(), configPath);\n      configPath = path.normalize(configPath);\n    }\n  }\n  return configPath;\n}\n\nexport function loadConfigAndTasks(\n  hardhatArguments?: Partial<HardhatArguments>,\n  {\n    showEmptyConfigWarning = false,\n    showSolidityConfigWarnings = false,\n  }: {\n    showEmptyConfigWarning?: boolean;\n    showSolidityConfigWarnings?: boolean;\n  } = {\n    showEmptyConfigWarning: false,\n    showSolidityConfigWarnings: false,\n  }\n): { resolvedConfig: HardhatConfig; userConfig: HardhatUserConfig } {\n  let configPath =\n    hardhatArguments !== undefined ? hardhatArguments.config : undefined;\n\n  configPath = resolveConfigPath(configPath);\n  log(`Loading Hardhat config from ${configPath}`);\n  // Before loading the builtin tasks, the default and user's config we expose\n  // the config env in the global object.\n  const configEnv = require(\"./config-env\");\n\n  const globalAsAny: any = global;\n\n  Object.entries(configEnv).forEach(\n    ([key, value]) => (globalAsAny[key] = value)\n  );\n\n  const ctx = HardhatContext.getHardhatContext();\n\n  ctx.setConfigLoadingAsStarted();\n\n  let userConfig;\n\n  try {\n    require(\"../tasks/builtin-tasks\");\n    userConfig = importCsjOrEsModule(configPath);\n  } catch (e) {\n    analyzeModuleNotFoundError(e, configPath);\n\n    // eslint-disable-next-line @nomiclabs/hardhat-internal-rules/only-hardhat-error\n    throw e;\n  } finally {\n    ctx.setConfigLoadingAsFinished();\n  }\n\n  if (showEmptyConfigWarning) {\n    checkEmptyConfig(userConfig, { showSolidityConfigWarnings });\n  }\n\n  validateConfig(userConfig);\n\n  if (showSolidityConfigWarnings) {\n    checkMissingSolidityConfig(userConfig);\n  }\n\n  // To avoid bad practices we remove the previously exported stuff\n  Object.keys(configEnv).forEach((key) => (globalAsAny[key] = undefined));\n\n  const frozenUserConfig = deepFreezeUserConfig(userConfig);\n\n  const resolved = resolveConfig(configPath, userConfig);\n\n  for (const extender of HardhatContext.getHardhatContext().configExtenders) {\n    extender(resolved, frozenUserConfig);\n  }\n\n  if (showSolidityConfigWarnings) {\n    checkUnsupportedSolidityConfig(resolved);\n    checkUnsupportedRemappings(resolved);\n  }\n\n  return { resolvedConfig: resolved, userConfig: frozenUserConfig };\n}\n\nfunction deepFreezeUserConfig(\n  config: any,\n  propertyPath: Array<string | number | symbol> = []\n) {\n  if (typeof config !== \"object\" || config === null) {\n    return config;\n  }\n\n  return new Proxy(config, {\n    get(target: any, property: string | number | symbol, receiver: any): any {\n      return deepFreezeUserConfig(Reflect.get(target, property, receiver), [\n        ...propertyPath,\n        property,\n      ]);\n    },\n\n    set(\n      target: any,\n      property: string | number | symbol,\n      _value: any,\n      _receiver: any\n    ): boolean {\n      throw new HardhatError(ERRORS.GENERAL.USER_CONFIG_MODIFIED, {\n        path: [...propertyPath, property]\n          .map((pathPart) => pathPart.toString())\n          .join(\".\"),\n      });\n    },\n  });\n}\n\n/**\n * Receives an Error and checks if it's a MODULE_NOT_FOUND and the reason that\n * caused it.\n *\n * If it can infer the reason, it throws an appropiate error. Otherwise it does\n * nothing.\n */\nexport function analyzeModuleNotFoundError(error: any, configPath: string) {\n  const stackTraceParser =\n    require(\"stacktrace-parser\") as typeof StackTraceParserT;\n\n  if (error.code !== \"MODULE_NOT_FOUND\") {\n    return;\n  }\n  const stackTrace = stackTraceParser.parse(error.stack);\n  const throwingFile = stackTrace\n    .filter((x) => x.file !== null)\n    .map((x) => x.file!)\n    .find((x) => path.isAbsolute(x));\n\n  if (throwingFile === null || throwingFile === undefined) {\n    return;\n  }\n\n  // if the error comes from the config file, we ignore it because we know it's\n  // a direct import that's missing\n  if (throwingFile === configPath) {\n    return;\n  }\n\n  const packageJsonPath = findClosestPackageJson(throwingFile);\n\n  if (packageJsonPath === null) {\n    return;\n  }\n\n  const packageJson = fsExtra.readJsonSync(packageJsonPath);\n  const peerDependencies: { [name: string]: string } =\n    packageJson.peerDependencies ?? {};\n\n  if (peerDependencies[\"@nomiclabs/buidler\"] !== undefined) {\n    throw new HardhatError(ERRORS.PLUGINS.BUIDLER_PLUGIN, {\n      plugin: packageJson.name,\n    });\n  }\n\n  // if the problem doesn't come from a hardhat plugin, we ignore it\n  if (peerDependencies.hardhat === undefined) {\n    return;\n  }\n\n  const missingPeerDependencies: { [name: string]: string } = {};\n  for (const [peerDependency, version] of Object.entries(peerDependencies)) {\n    const peerDependencyPackageJson = readPackageJson(peerDependency);\n    if (peerDependencyPackageJson === undefined) {\n      missingPeerDependencies[peerDependency] = version;\n    }\n  }\n\n  const missingPeerDependenciesNames = Object.keys(missingPeerDependencies);\n  if (missingPeerDependenciesNames.length > 0) {\n    throw new HardhatError(ERRORS.PLUGINS.MISSING_DEPENDENCIES, {\n      plugin: packageJson.name,\n      missingDependencies: missingPeerDependenciesNames.join(\", \"),\n      missingDependenciesVersions: Object.entries(missingPeerDependencies)\n        .map(([name, version]) => `\"${name}@${version}\"`)\n        .join(\" \"),\n    });\n  }\n}\n\ninterface PackageJson {\n  name: string;\n  version: string;\n  peerDependencies?: {\n    [name: string]: string;\n  };\n}\n\nfunction readPackageJson(packageName: string): PackageJson | undefined {\n  try {\n    const packageJsonPath = require.resolve(\n      path.join(packageName, \"package.json\")\n    );\n\n    return require(packageJsonPath);\n  } catch {\n    return undefined;\n  }\n}\n\nfunction checkEmptyConfig(\n  userConfig: any,\n  { showSolidityConfigWarnings }: { showSolidityConfigWarnings: boolean }\n) {\n  if (userConfig === undefined || Object.keys(userConfig).length === 0) {\n    let warning = `Hardhat config is returning an empty config object, check the export from the config file if this is unexpected.\\n`;\n\n    // This 'learn more' section is also printed by the solidity config warning,\n    // so we need to check to avoid printing it twice\n    if (!showSolidityConfigWarnings) {\n      warning += `\\nLearn more about configuring Hardhat at https://hardhat.org/config\\n`;\n    }\n\n    console.warn(chalk.yellow(warning));\n  }\n}\n\nfunction checkMissingSolidityConfig(userConfig: any) {\n  if (userConfig.solidity === undefined) {\n    console.warn(\n      chalk.yellow(\n        `Solidity compiler is not configured. Version ${DEFAULT_SOLC_VERSION} will be used by default. Add a 'solidity' entry to your configuration to suppress this warning.\n\nLearn more about compiler configuration at https://hardhat.org/config\n`\n      )\n    );\n  }\n}\n\nfunction checkUnsupportedSolidityConfig(resolvedConfig: HardhatConfig) {\n  const compilerVersions = resolvedConfig.solidity.compilers.map(\n    (x) => x.version\n  );\n  const overrideVersions = Object.values(resolvedConfig.solidity.overrides).map(\n    (x) => x.version\n  );\n  const solcVersions = [...compilerVersions, ...overrideVersions];\n\n  const unsupportedVersions: string[] = [];\n  for (const solcVersion of solcVersions) {\n    if (!semver.satisfies(solcVersion, SUPPORTED_SOLIDITY_VERSION_RANGE)) {\n      unsupportedVersions.push(solcVersion);\n    }\n  }\n\n  if (unsupportedVersions.length > 0) {\n    console.warn(\n      chalk.yellow(\n        `Solidity ${unsupportedVersions.join(\", \")} ${\n          unsupportedVersions.length === 1 ? \"is\" : \"are\"\n        } not fully supported yet. You can still use Hardhat, but some features, like stack traces, might not work correctly.\n\nLearn more at https://hardhat.org/hardhat-runner/docs/reference/solidity-support\n`\n      )\n    );\n  }\n}\n\nfunction checkUnsupportedRemappings({ solidity }: HardhatConfig) {\n  const solcConfigs = [\n    ...solidity.compilers,\n    ...Object.values(solidity.overrides),\n  ];\n  const remappings = solcConfigs.filter(\n    ({ settings }) => settings.remappings !== undefined\n  );\n\n  if (remappings.length > 0) {\n    console.warn(\n      chalk.yellow(\n        `Solidity remappings are not currently supported; you may experience unexpected compilation results. Remove any 'remappings' fields from your configuration to suppress this warning.\n\nLearn more about compiler configuration at https://hardhat.org/config\n`\n      )\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}